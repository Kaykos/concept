<legend *ngIf="user.role == 'invitado' || user.role == 'cliente'" _ngcontent-iou-53="">Locaciones</legend>
<legend *ngIf="user.role == 'proveedor' || user.role == 'admin'" _ngcontent-iou-53="">Servicios</legend>

<div class="panel panel-default">

  <!--Filter-->
  <div class="row">
    <div class="col-md-9">
      <input *ngIf="config.filtering"
             [ngTableFiltering]="config.filtering"
             class="form-control"
             (tableChanged)="onChangeTable(config)"/>
    </div>
  </div>

  <br>

  <!--Display table-->
  <ng-table [config]="config"
            (tableChanged)="onChangeTable(config)"
            (cellClicked)="onCellClick($event)"
            [rows]="rows" [columns]="columns">
  </ng-table>

  <!--Display pagination-->
  <div class="page-container">
    <pagination *ngIf="config.paging"
                class="pagination-sm"
                [(ngModel)]="page"
                [totalItems]="length"
                [itemsPerPage]="itemsPerPage"
                [maxSize]="maxSize"
                [boundaryLinks]="true"
                [rotate]="false"
                (pageChanged)="onChangeTable(config, $event)"
                (numPages)="numPages = $event">
    </pagination>
  </div>

  <!--Modal of specific service-->
  <modal [size]="Large" #modal1>
    <modal-header [show-close]="true">
    </modal-header>
    <modal-body>

      <div _ngcontent-iou-53="" class="panel qanel-default">
        <div _ngcontent-iou-53="" class="panel-body">
          <form _ngcontent-iou-53="" action="/" class="form-horizontal ng-untouched ng-pristine ng-valid" method="get">

            <!--Start Service information management fields-->

            <!--Start Name management-->
            <fieldset _ngcontent-iou-53="">
              <div _ngcontent-iou-53="" class="form-group">
                <label _ngcontent-iou-53="" class="col-sm-2 control-label" for="input-id-1">Nombre</label>
                <div _ngcontent-iou-53="" class="col-sm-10">
                  <input _ngcontent-iou-53="" class="form-control" id="input-id-1" name="name" type="text" #nameAdd>
                  <span *ngIf="nameError" _ngcontent-uqm-67="" class="text-danger">El campo es requerido</span>
                </div>
              </div>
            </fieldset>
            <!--End Name management-->

            <!--Start Cost management-->
            <fieldset _ngcontent-iou-53="">
              <div _ngcontent-iou-53="" class="form-group">
                <label _ngcontent-iou-53="" class="col-sm-2 control-label" for="input-id-2">Costo</label>
                <div _ngcontent-iou-53="" class="col-sm-10">
                  <input _ngcontent-iou-53="" class="form-control" id="input-id-2" name="cost" type="text" #costAdd>
                  <span *ngIf="costError" _ngcontent-uqm-67="" class="text-danger">El campo es requerido</span>
                </div>
              </div>
            </fieldset>
            <!--End Cost management-->

            <!--Start Description management-->
            <fieldset _ngcontent-iou-53="">
              <div _ngcontent-iou-53="" class="form-group">
                <label _ngcontent-iou-53="" class="col-sm-2 control-label" for="input-id-3">Descripción</label>
                <div _ngcontent-iou-53="" class="col-sm-10">
                  <input _ngcontent-iou-53="" class="form-control" id="input-id-3" name="description" type="text" #descriptionAdd>
                  <span *ngIf="descriptionError" _ngcontent-uqm-67="" class="text-danger">El campo es requerido</span>
                </div>
              </div>
            </fieldset>
            <!--End Description management-->

            <!--Start Type management-->
            <fieldset _ngcontent-iou-53="" class="last-child">
              <div _ngcontent-iou-53="" class="form-group">
                <label _ngcontent-iou-53="" class="col-sm-2 control-label">Tipo</label>
                <div _ngcontent-iou-53="" class="col-sm-10">
                  <select _ngcontent-iou-53="" class="form-control" name="account" #type>
                    <option _ngcontent-iou-53="">locacion</option>
                    <option _ngcontent-iou-53="">comida</option>
                    <option _ngcontent-iou-53="">musica</option>
                  </select>
                </div>
              </div>
            </fieldset>
            <!--End Type management-->

          </form>
        </div>
      </div>

      <div *ngIf="showMap1 && type.value == 'locacion'">
        <span>Fijar ubicación:</span>
        <br>
        <sebm-google-map (mapClick)="handleClickMap($event)" [zoom]="13" [latitude]="latitude" [longitude]="longitude" #map1>
          <sebm-google-map-marker [latitude]="latitude" [longitude]="longitude"></sebm-google-map-marker>
        </sebm-google-map>
      </div>

      <br>

      <button class="btn btn-primary btn-lg" (click)="add(nameAdd.value, type.value, +costAdd.value, descriptionAdd.value)">Agregar</button>
      <span *ngIf="errorAdd" _ngcontent-uqm-67="" class="text-danger">{{errorMessage}}</span>

    </modal-body>
    <modal-footer [show-default-buttons]="true"></modal-footer>
  </modal>

  <!--Modal of specific service-->
  <modal [size]="Large" #modal2>
    <modal-header [show-close]="true">
      <h4 class="modal-title">{{service.name}}</h4>
    </modal-header>
    <modal-body>

      <div *ngIf="!updateService">
        <img [src]="picturePath" [alt]="service.name" style="width: 100%" />
        <br>
        <br>
        <span>Valoración: {{service.rating}}</span>

        <br>
        <span>Costo: {{service.cost | currency:'COP':true:'1.0-3'}}</span>
        <br>
        <span>Descripción: {{service.description}}</span>
        <br>

        <div>
          <div *ngIf="showMap2 && service.type == 'locacion'">
            <br>
            <span>Ubicación:</span>
            <br>

            <sebm-google-map [zoom]="13" [latitude]="service.latitude" [longitude]="service.longitude" #map2>
              <sebm-google-map-marker [latitude]="service.latitude" [longitude]="service.longitude"></sebm-google-map-marker>
            </sebm-google-map>
          </div>
        </div>

        <br>

        <!--Change condition-->
        <button *ngIf="user.role == 'proveedor'" class="btn btn-primary btn-lg" (click)="update()">Editar</button>
        <button *ngIf="user.role == 'proveedor'" class="btn btn-primary btn-lg" (click)="delete()">Eliminar</button>
        <span *ngIf="errorDelete" _ngcontent-uqm-67="" class="text-danger">{{errorMessage}}</span>
      </div>

      <div *ngIf="updateService">

        <div _ngcontent-iou-53="" class="panel panel-default">
          <div _ngcontent-iou-53="" class="panel-body">
            <form _ngcontent-iou-53="" action="/" class="form-horizontal ng-untouched ng-pristine ng-valid" method="get">

              <!--Start Service information management fields-->

              <!--Start Cost management-->
              <fieldset _ngcontent-iou-53="">
                <div _ngcontent-iou-53="" class="form-group">
                  <label _ngcontent-iou-53="" class="col-sm-2 control-label" for="input-id-4">Costo</label>
                  <div _ngcontent-iou-53="" class="col-sm-10">
                    <input _ngcontent-iou-53="" class="form-control" id="input-id-4" name="cost" type="text" value="0" #costUpdate>
                    <span *ngIf="costError" _ngcontent-uqm-67="" class="text-danger">El campo es requerido</span>
                  </div>
                </div>
              </fieldset>
              <!--End Cost management-->

              <!--Start Description management-->
              <fieldset _ngcontent-iou-53="">
                <div _ngcontent-iou-53="" class="form-group">
                  <label _ngcontent-iou-53="" class="col-sm-2 control-label" for="input-id-5">Descripción</label>
                  <div _ngcontent-iou-53="" class="col-sm-10">
                    <input _ngcontent-iou-53="" class="form-control" id="input-id-5" name="description" type="text" #descriptionUpdate>
                    <span *ngIf="descriptionError" _ngcontent-uqm-67="" class="text-danger">El campo es requerido</span>
                  </div>
                </div>
              </fieldset>
              <!--End Description management-->

              <!--Start Name management-->
              <fieldset _ngcontent-iou-53="">
                <div _ngcontent-iou-53="" class="form-group">
                  <label _ngcontent-iou-53="" class="col-sm-2 control-label" for="input-id-6">Nombre</label>
                  <div _ngcontent-iou-53="" class="col-sm-10">
                    <input _ngcontent-iou-53="" class="form-control" id="input-id-6" name="name" type="text" #nameUpdate>
                    <span *ngIf="nameError" _ngcontent-uqm-67="" class="text-danger">El campo es requerido</span>
                  </div>
                </div>
              </fieldset>
              <!--End Name management-->


              <div _ngcontent-tpe-53="" class="form-group">
                <div _ngcontent-tpe-53="" class="col-lg-offset-2 col-lg-10">
                  <button _ngcontent-tpe-53="" class="btn btn-sm btn-default" type="submit" (click)="updateFields(+costUpdate.value, descriptionUpdate.value, nameUpdate.value)">Cambiar</button>
                  <span *ngIf="errorUpdate" _ngcontent-uqm-67="" class="text-danger">{{errorMessage}}</span>
                  <span *ngIf="fieldsChanged" _ngcontent-uqm-67="" class="text-success">Los campos han sido actualizados</span>
                </div>
              </div>

            </form>
          </div>
        </div>

        <button class="btn btn-primary btn-lg" (click)="back()">Atrás</button>
      </div>

    </modal-body>
    <modal-footer [show-default-buttons]="true"></modal-footer>
  </modal>

  <div *ngIf="user.role == 'admin' || user.role == 'proveedor'" class="button-wrapper">
    <button class="btn btn-primary btn-lg" (click)="newService()">Agregar</button>
  </div>

</div>
