"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
const platform_browser_1 = require("@angular/platform-browser");
const core_1 = require("@angular/core");
const testing_1 = require("@angular/core/testing");
const testing_2 = require("@angular/platform-browser-dynamic/testing");
const mobx_1 = require("mobx");
const ng2_mobx_1 = require("./ng2-mobx");
// import {
//   expect, it, iit, xit,
//   describe, ddescribe, xdescribe,
//   before, beforeEach, beforeEachProviders, withProviders,
//   async, inject,
//   testing
// } from "@angular/core/testing";
// Adapted from the official angular2 docs, https://angular.io/docs/ts/latest/guide/testing.html
let fullNameCalculations;
class TestStore {
    constructor() {
        this.firstName = "James";
        this.lastName = "Bond";
    }
    get fullName() {
        fullNameCalculations++;
        return `${this.firstName} ${this.lastName}`;
    }
}
__decorate([
    mobx_1.observable, 
    __metadata('design:type', Object)
], TestStore.prototype, "firstName", void 0);
__decorate([
    mobx_1.observable, 
    __metadata('design:type', Object)
], TestStore.prototype, "lastName", void 0);
__decorate([
    mobx_1.computed, 
    __metadata('design:type', Object)
], TestStore.prototype, "fullName", null);
let TestComponent = class TestComponent {
    constructor() {
        this.store = new TestStore();
        fullNameCalculations = 0;
    }
    setLastName() {
        this.store.lastName = 'Dean';
    }
};
TestComponent = __decorate([
    core_1.Component({
        template: `
    <div *mobxAutorun>
      <span id="fullname">{{store.fullName}}</span>
    </div>
    <button (click)="setLastName()">Set Name</button>
  `,
        changeDetection: core_1.ChangeDetectionStrategy.OnPush
    }), 
    __metadata('design:paramtypes', [])
], TestComponent);
let TestComponentSync = class TestComponentSync {
    constructor() {
        this.store = new TestStore();
        fullNameCalculations = 0;
    }
    setLastName() {
        this.store.lastName = 'Dean';
    }
};
TestComponentSync = __decorate([
    core_1.Component({
        template: `
    <div *mobxAutorunSync>
      <span id="fullname">{{store.fullName}}</span>
    </div>
    <button (click)="setLastName()">Set Name</button>
  `,
        changeDetection: core_1.ChangeDetectionStrategy.OnPush
    }), 
    __metadata('design:paramtypes', [])
], TestComponentSync);
let fullname, button, component;
describe('ng2Mobx', () => {
    testing_1.TestBed.initTestEnvironment(testing_2.BrowserDynamicTestingModule, testing_2.platformBrowserDynamicTesting());
    describe('mobxAutorun', () => {
        beforeEach((done) => {
            component = testing_1.TestBed
                .configureTestingModule({ declarations: [ng2_mobx_1.MobxAutorunDirective, TestComponent] })
                .createComponent(TestComponent);
            component.detectChanges(); // initial binding
            fullname = component.debugElement.query(platform_browser_1.By.css("#fullname"));
            button = component.debugElement.query(platform_browser_1.By.css("button"));
            setTimeout(done);
        });
        // color tests
        it("should have correct content", () => {
            expect(fullname.nativeElement.innerText).toEqual("James Bond");
            expect(fullNameCalculations).toEqual(1);
        });
        it("should recompute value once", (done) => {
            button.triggerEventHandler("click", null);
            setTimeout(() => {
                expect(fullname.nativeElement.innerText).toEqual("James Dean");
                expect(fullNameCalculations).toEqual(2);
                done();
            });
        });
    });
    describe('mobxAutorunSync', () => {
        beforeEach(() => {
            component = testing_1.TestBed
                .configureTestingModule({ declarations: [ng2_mobx_1.MobxAutorunSyncDirective, TestComponentSync] })
                .createComponent(TestComponentSync);
            component.detectChanges(); // initial binding
            fullname = component.debugElement.query(platform_browser_1.By.css("#fullname"));
            button = component.debugElement.query(platform_browser_1.By.css("button"));
        });
        // color tests
        it("should have correct content", () => {
            expect(fullname.nativeElement.innerText).toEqual("James Bond");
            expect(fullNameCalculations).toEqual(1);
        });
        it("should recompute value once", () => {
            button.triggerEventHandler("click", null);
            expect(fullname.nativeElement.innerText).toEqual("James Dean");
            expect(fullNameCalculations).toEqual(2);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmcyLW1vYnguc3BlYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL2xpYi9uZzItbW9ieC5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxtQ0FBbUIsMkJBQTJCLENBQUMsQ0FBQTtBQUMvQyx1QkFBaUUsZUFBZSxDQUFDLENBQUE7QUFDakYsMEJBQWdELHVCQUF1QixDQUFDLENBQUE7QUFDeEUsMEJBQTJFLDJDQUEyQyxDQUFDLENBQUE7QUFFdkgsdUJBQXFDLE1BQU0sQ0FBQyxDQUFBO0FBQzVDLDJCQUErRCxZQUFZLENBQUMsQ0FBQTtBQUU1RSxXQUFXO0FBQ1gsMEJBQTBCO0FBQzFCLG9DQUFvQztBQUNwQyw0REFBNEQ7QUFDNUQsbUJBQW1CO0FBQ25CLFlBQVk7QUFDWixrQ0FBa0M7QUFFbEMsZ0dBQWdHO0FBRWhHLElBQUksb0JBQW9CLENBQUM7QUFFekI7SUFBQTtRQUNjLGNBQVMsR0FBRyxPQUFPLENBQUM7UUFDcEIsYUFBUSxHQUFHLE1BQU0sQ0FBQztJQU1oQyxDQUFDO0lBSlcsSUFBSSxRQUFRO1FBQ3BCLG9CQUFvQixFQUFFLENBQUM7UUFDdkIsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDOUMsQ0FBQztBQUNILENBQUM7QUFQQztJQUFDLGlCQUFVOzs0Q0FBQTtBQUNYO0lBQUMsaUJBQVU7OzJDQUFBO0FBRVg7SUFBQyxlQUFROzt5Q0FBQTtBQWVYO0lBRUU7UUFEUSxVQUFLLEdBQUcsSUFBSSxTQUFTLEVBQUUsQ0FBQztRQUU5QixvQkFBb0IsR0FBRyxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUNELFdBQVc7UUFDVCxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7SUFDL0IsQ0FBQztBQUNILENBQUM7QUFqQkQ7SUFBQyxnQkFBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFOzs7OztHQUtUO1FBQ0QsZUFB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SCxjQUFjO1FBQ2QsRUFBRSxDQUFDLDZCQUE2QixFQUFFO1lBQ2hDLE1BQU0sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMvRCxNQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsNkJBQTZCLEVBQUU7WUFDaEMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMxQyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDL0QsTUFBTSxDQUFDLG9CQUFvQixDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJ5IH0gZnJvbSBcIkBhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXJcIjtcbmltcG9ydCB7IERlYnVnRWxlbWVudCwgQ29tcG9uZW50LCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBUZXN0QmVkLCBhc3luYywgZmFrZUFzeW5jLCB0aWNrIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmUvdGVzdGluZ1wiO1xuaW1wb3J0IHsgQnJvd3NlckR5bmFtaWNUZXN0aW5nTW9kdWxlLCBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljVGVzdGluZyB9IGZyb20gXCJAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMvdGVzdGluZ1wiO1xuXG5pbXBvcnQgeyBvYnNlcnZhYmxlLCBjb21wdXRlZCB9IGZyb20gXCJtb2J4XCI7XG5pbXBvcnQgeyBNb2J4QXV0b3J1bkRpcmVjdGl2ZSwgTW9ieEF1dG9ydW5TeW5jRGlyZWN0aXZlIH0gZnJvbSBcIi4vbmcyLW1vYnhcIjtcblxuLy8gaW1wb3J0IHtcbi8vICAgZXhwZWN0LCBpdCwgaWl0LCB4aXQsXG4vLyAgIGRlc2NyaWJlLCBkZGVzY3JpYmUsIHhkZXNjcmliZSxcbi8vICAgYmVmb3JlLCBiZWZvcmVFYWNoLCBiZWZvcmVFYWNoUHJvdmlkZXJzLCB3aXRoUHJvdmlkZXJzLFxuLy8gICBhc3luYywgaW5qZWN0LFxuLy8gICB0ZXN0aW5nXG4vLyB9IGZyb20gXCJAYW5ndWxhci9jb3JlL3Rlc3RpbmdcIjtcblxuLy8gQWRhcHRlZCBmcm9tIHRoZSBvZmZpY2lhbCBhbmd1bGFyMiBkb2NzLCBodHRwczovL2FuZ3VsYXIuaW8vZG9jcy90cy9sYXRlc3QvZ3VpZGUvdGVzdGluZy5odG1sXG5cbmxldCBmdWxsTmFtZUNhbGN1bGF0aW9ucztcblxuY2xhc3MgVGVzdFN0b3JlIHtcbiAgQG9ic2VydmFibGUgZmlyc3ROYW1lID0gXCJKYW1lc1wiO1xuICBAb2JzZXJ2YWJsZSBsYXN0TmFtZSA9IFwiQm9uZFwiO1xuXG4gIEBjb21wdXRlZCBnZXQgZnVsbE5hbWUoKSB7XG4gICAgZnVsbE5hbWVDYWxjdWxhdGlvbnMrKztcbiAgICByZXR1cm4gYCR7dGhpcy5maXJzdE5hbWV9ICR7dGhpcy5sYXN0TmFtZX1gO1xuICB9XG59XG5cbkBDb21wb25lbnQoe1xuICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgKm1vYnhBdXRvcnVuPlxuICAgICAgPHNwYW4gaWQ9XCJmdWxsbmFtZVwiPnt7c3RvcmUuZnVsbE5hbWV9fTwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8YnV0dG9uIChjbGljayk9XCJzZXRMYXN0TmFtZSgpXCI+U2V0IE5hbWU8L2J1dHRvbj5cbiAgYCxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5jbGFzcyBUZXN0Q29tcG9uZW50IHtcbiAgcHJpdmF0ZSBzdG9yZSA9IG5ldyBUZXN0U3RvcmUoKTtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgZnVsbE5hbWVDYWxjdWxhdGlvbnMgPSAwO1xuICB9XG4gIHNldExhc3ROYW1lKCkge1xuICAgIHRoaXMuc3RvcmUubGFzdE5hbWUgPSAnRGVhbic7XG4gIH1cbn1cblxuQENvbXBvbmVudCh7XG4gIHRlbXBsYXRlOiBgXG4gICAgPGRpdiAqbW9ieEF1dG9ydW5TeW5jPlxuICAgICAgPHNwYW4gaWQ9XCJmdWxsbmFtZVwiPnt7c3RvcmUuZnVsbE5hbWV9fTwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8YnV0dG9uIChjbGljayk9XCJzZXRMYXN0TmFtZSgpXCI+U2V0IE5hbWU8L2J1dHRvbj5cbiAgYCxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5jbGFzcyBUZXN0Q29tcG9uZW50U3luYyB7XG4gIHByaXZhdGUgc3RvcmUgPSBuZXcgVGVzdFN0b3JlKCk7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGZ1bGxOYW1lQ2FsY3VsYXRpb25zID0gMDtcbiAgfVxuICBzZXRMYXN0TmFtZSgpIHtcbiAgICB0aGlzLnN0b3JlLmxhc3ROYW1lID0gJ0RlYW4nO1xuICB9XG59XG5cbmxldCBmdWxsbmFtZSwgYnV0dG9uLCBjb21wb25lbnQ7XG5cbmRlc2NyaWJlKCduZzJNb2J4JywgKCkgPT4ge1xuICBUZXN0QmVkLmluaXRUZXN0RW52aXJvbm1lbnQoQnJvd3NlckR5bmFtaWNUZXN0aW5nTW9kdWxlLCBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljVGVzdGluZygpKTtcbiAgZGVzY3JpYmUoJ21vYnhBdXRvcnVuJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKGRvbmUpID0+IHtcbiAgICAgIGNvbXBvbmVudCA9IFRlc3RCZWRcbiAgICAgICAgLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoeyBkZWNsYXJhdGlvbnM6IFsgTW9ieEF1dG9ydW5EaXJlY3RpdmUsIFRlc3RDb21wb25lbnQgXSB9KVxuICAgICAgICAuY3JlYXRlQ29tcG9uZW50KFRlc3RDb21wb25lbnQpO1xuXG4gICAgICBjb21wb25lbnQuZGV0ZWN0Q2hhbmdlcygpOyAvLyBpbml0aWFsIGJpbmRpbmdcblxuICAgICAgZnVsbG5hbWUgPSBjb21wb25lbnQuZGVidWdFbGVtZW50LnF1ZXJ5KEJ5LmNzcyhcIiNmdWxsbmFtZVwiKSk7XG4gICAgICBidXR0b24gPSBjb21wb25lbnQuZGVidWdFbGVtZW50LnF1ZXJ5KEJ5LmNzcyhcImJ1dHRvblwiKSk7XG4gICAgICBzZXRUaW1lb3V0KGRvbmUpO1xuICAgIH0pO1xuXG4gICAgLy8gY29sb3IgdGVzdHNcbiAgICBpdChcInNob3VsZCBoYXZlIGNvcnJlY3QgY29udGVudFwiLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZnVsbG5hbWUubmF0aXZlRWxlbWVudC5pbm5lclRleHQpLnRvRXF1YWwoXCJKYW1lcyBCb25kXCIpO1xuICAgICAgZXhwZWN0KGZ1bGxOYW1lQ2FsY3VsYXRpb25zKS50b0VxdWFsKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmVjb21wdXRlIHZhbHVlIG9uY2VcIiwgKGRvbmUpID0+IHtcbiAgICAgIGJ1dHRvbi50cmlnZ2VyRXZlbnRIYW5kbGVyKFwiY2xpY2tcIiwgbnVsbCk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGZ1bGxuYW1lLm5hdGl2ZUVsZW1lbnQuaW5uZXJUZXh0KS50b0VxdWFsKFwiSmFtZXMgRGVhblwiKTtcbiAgICAgICAgZXhwZWN0KGZ1bGxOYW1lQ2FsY3VsYXRpb25zKS50b0VxdWFsKDIpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ21vYnhBdXRvcnVuU3luYycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGNvbXBvbmVudCA9IFRlc3RCZWRcbiAgICAgICAgLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoeyBkZWNsYXJhdGlvbnM6IFsgTW9ieEF1dG9ydW5TeW5jRGlyZWN0aXZlLCBUZXN0Q29tcG9uZW50U3luYyBdIH0pXG4gICAgICAgIC5jcmVhdGVDb21wb25lbnQoVGVzdENvbXBvbmVudFN5bmMpO1xuXG4gICAgICBjb21wb25lbnQuZGV0ZWN0Q2hhbmdlcygpOyAvLyBpbml0aWFsIGJpbmRpbmdcblxuICAgICAgZnVsbG5hbWUgPSBjb21wb25lbnQuZGVidWdFbGVtZW50LnF1ZXJ5KEJ5LmNzcyhcIiNmdWxsbmFtZVwiKSk7XG4gICAgICBidXR0b24gPSBjb21wb25lbnQuZGVidWdFbGVtZW50LnF1ZXJ5KEJ5LmNzcyhcImJ1dHRvblwiKSk7XG4gICAgfSk7XG5cbiAgICAvLyBjb2xvciB0ZXN0c1xuICAgIGl0KFwic2hvdWxkIGhhdmUgY29ycmVjdCBjb250ZW50XCIsICgpID0+IHtcbiAgICAgIGV4cGVjdChmdWxsbmFtZS5uYXRpdmVFbGVtZW50LmlubmVyVGV4dCkudG9FcXVhbChcIkphbWVzIEJvbmRcIik7XG4gICAgICBleHBlY3QoZnVsbE5hbWVDYWxjdWxhdGlvbnMpLnRvRXF1YWwoMSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCByZWNvbXB1dGUgdmFsdWUgb25jZVwiLCAoKSA9PiB7XG4gICAgICBidXR0b24udHJpZ2dlckV2ZW50SGFuZGxlcihcImNsaWNrXCIsIG51bGwpO1xuICAgICAgZXhwZWN0KGZ1bGxuYW1lLm5hdGl2ZUVsZW1lbnQuaW5uZXJUZXh0KS50b0VxdWFsKFwiSmFtZXMgRGVhblwiKTtcbiAgICAgIGV4cGVjdChmdWxsTmFtZUNhbGN1bGF0aW9ucykudG9FcXVhbCgyKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==